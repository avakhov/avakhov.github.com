<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Alexey Vakhov</title>
    <description>Блог, милый блог. Новая история каждый будний день.</description>
    <link>http://vakhov.me</link>
    <atom:link href="http://vakhov.me/atom.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>Пару приемов при работе с JSON в консоли</title>
        <description>
          
          &lt;p&gt;Если вы работаете курлом с каким-нибудь JSON-API, то кроме умения вбивать без ошибок &lt;code&gt;-H &amp;#39;Content-Type: application/json&lt;/code&gt; вам очень
пригодятся утилиты для работы с JSON.&lt;/p&gt;

&lt;p&gt;Раньше я всегда использовал питон (обычно он есть везде), чтобы красиво отрисовать результат: &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;curl ... &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; python -m json.tool
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Но сейчас полностью перешел на &lt;a href=&quot;https://stedolan.github.io/jq/&quot;&gt;jq&lt;/a&gt;, очень рекомендую посмотреть, если еще не видели.
Вот так например
в Селектеле можно найти ID проекта с именем &lt;code&gt;some-proj&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;curl -s -H &lt;span class=&quot;s2&quot;&gt;&amp;quot;X-token: $SELECTEL_TOKEN&amp;quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  https://api.selectel.ru/vpc/resell/v2/projects &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  jq -r &lt;span class=&quot;s1&quot;&gt;&amp;#39;.projects | map(select(.name == &amp;quot;some-proj&amp;quot;)) | .[0].id&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Раньше бы я такую штуку сделал бы на руби, но по-моему здорово уметь решать одну и ту же задачу по разному.&lt;/p&gt;

        </description>
        <pubDate>Fri, 21 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/21/utils/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/21/utils/index.html</guid>
      </item>
    
      <item>
        <title>Кто дергал этот запрос и послал его?</title>
        <description>
          
          &lt;p&gt;Один из важных моментов оптимизации рейлс-приложения, на котором кстати часто вся оптимизация и заканчивается, это уменьшение количество запросов в базу.&lt;/p&gt;

&lt;p&gt;Самый простой способ понять что нужно оптимизировать, пожалуй - посмотреть в ньюрелике
под вашим штатным трафиком, какой экшен занимает больше всего времени. После этого запустить приложение локально и начать изучать
какие строчки кода тревожат базу. Многие проблемы легко понять просто по логам. Убрав тяжелые N+1, а также большинство
запросов &lt;code&gt;CACHE&lt;/code&gt;, вы сильно поможете приложению.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Все &lt;code&gt;СACHE&lt;/code&gt; очень рекомендую убирать (один из вариантов - смотрим и ностальгируем 
&lt;a href=&quot;http://railscasts.com/episodes/1-caching-with-instance-variables&quot;&gt;Caching with Instance Variables&lt;/a&gt;), так как несмотря на то что запрос в базу
не посылается, &lt;code&gt;ActiveRecord&lt;/code&gt; кэширует запрос на уровне SQL, все AR-объекты пересоздаются с нуля, что жгет CPU и негативно влияет на произодительность.&lt;/p&gt;

&lt;p&gt;Также есть два удобных инструмента, которые помогут справится с задачей. Старый, добрый &lt;a href=&quot;https://github.com/josevalim/rails-footnotes&quot;&gt;rails-footnotes&lt;/a&gt; на страницах
рисует полную информацию о всех запросах.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2/db/footnotes.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;Так как футнотес наверняка будет рвать верстку, то я его обычно подключаю с помощью такой конструкции:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;defined?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Footnotes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Footnotes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exists?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;FOOTNOTES&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Теперь, чтобы включить футноты достаточно создать в корне файл &lt;code&gt;touch FOOTNOTES&lt;/code&gt;. Если его удалить, то футноты отключатся без перезагрузки сервера.
Естественно на продакшене футноты не надо включать никогда &lt;img class=&#39;emoji&#39; title=&#39;:smile:&#39; alt=&#39;:smile:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f604.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;.&lt;/p&gt;

&lt;p&gt;Однако футноты не помогут, если таинственный запрос к базе в AJAX&amp;#39;е, а по коду сходу не понятно в каком колбеке или библиотеке он вызывается.
Решение тоже есть - это &lt;code&gt;ActiveSupport::Notifications&lt;/code&gt;. В инициалайзере подписываемся на
SQL-запросы и находим негодяя:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Notifications&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscribe&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;sql.active_record&amp;quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;caller&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;User Load&amp;quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Берегите свою базу смолоду и она вам верно прослужит многие годы &lt;img class=&#39;emoji&#39; title=&#39;:smile:&#39; alt=&#39;:smile:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f604.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;.&lt;/p&gt;

        </description>
        <pubDate>Thu, 20 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/20/db/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/20/db/index.html</guid>
      </item>
    
      <item>
        <title>Утилиты, утилиты</title>
        <description>
          
          &lt;p&gt;Вдруг кто не знал, но есть две прекрасные утилиты, одна полезная, а вторая от авторов Бейзкампа.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ngrok.com&quot;&gt;Ngrok&lt;/a&gt; - позволяет расшарить любой локальный порт прямо в интернет. &lt;code&gt;ngrok http 3000&lt;/code&gt; - просто запомните эту команду. Бесценно, когда
нужно показать приложение собеседнику по чатику, потестить его на айпеде, либо отладить работу с веб-хуками.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://xip.io&quot;&gt;Xip.io&lt;/a&gt; - wildcard-доменное имя к любому IP-адресу - &lt;code&gt;*.10.0.0.1.xip.io resolves to 10.0.0.1&lt;/code&gt;. У меня пока не было ни одного кейса,
когда бы это пригодилось, но я чувствую, что такие ситуации точно есть.&lt;/p&gt;

&lt;p&gt;Какие полезные утилиты для веб-разработки используете вы?&lt;/p&gt;

        </description>
        <pubDate>Wed, 19 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/19/ngrok/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/19/ngrok/index.html</guid>
      </item>
    
      <item>
        <title>Фейлы, они как файлы, только фейлы</title>
        <description>
          
          &lt;p&gt;В одном из докладов великолепного Алексея Рыбака были слова, что интересны не успехи, а фейлы. И я полностью согласен, что самые
теплые воспоминания оставляют именно события, где были тяжелые обстоятельства, да еще и сам оплошал, но в итоге
с честью выкрутился. Ну и в принципе все разговоры на вечеринках с коктейлями именно про проблемы, легаси, костыли и синюю
изоленту. Я не видел, чтобы два инженерами делились, какая у них большая пользовательская база, как тепло их любят пользователи,
какие великолепные показатели и перспективы, ми-ми-ми.
Поэтому всяким проблемам, проколам, особенно своим, я всегда уделяю самое пристальное
внимание.&lt;/p&gt;

&lt;p&gt;Итак сегодня руби и рейлс (примеры выдуманные, но основаны на реальных событиях):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# 1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;calc_full_name&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;full_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot; &amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# хе-хе, надо self.full_name = ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# 2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;k&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;v&amp;quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;save!&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# хо-хо, нужно user.json_will_change! или переделать&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# 3&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# хы-хы, 1 а не 1.5&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Это то что сходу вспомнил, чтобы написать очередной пост &lt;img class=&#39;emoji&#39; title=&#39;:smiley_cat:&#39; alt=&#39;:smiley_cat:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f63a.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;. Идеи то уже кончаются, а блог то еще писать не меньше 10 месяцев.
идет.&lt;/p&gt;

        </description>
        <pubDate>Tue, 18 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/18/failes/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/18/failes/index.html</guid>
      </item>
    
      <item>
        <title>Delayed Job - хак или фича?</title>
        <description>
          
          &lt;p&gt;Так сложилось, что мы пользуемся для всяких асинхронных задач &lt;a href=&quot;https://github.com/collectiveidea/delayed_job&quot;&gt;DelayedJob&lt;/a&gt;.
Удобно, что этот тот же постгрес, из коробки комфортный API, разумные дефалтовые настройки (например интервалы сколько
раз запускать упавшую задачу).&lt;/p&gt;

&lt;p&gt;Однако если задуматься, то DJ - эта та еще штука и при эксплуатации нужно знать его особенности.
Когда вы делаете
&lt;code&gt;User.find(1).delay.send_hello&lt;/code&gt;, то в базу сериализуется объект типа &lt;code&gt;User&lt;/code&gt; и факт, что к нему нужно применить
метод &lt;code&gt;:send_hello&lt;/code&gt;. Одноко, чтобы это работало как магия, при восстановлении &lt;code&gt;AR&lt;/code&gt;-объекта, на самом
деле он берется прямо из базы &lt;a href=&quot;https://github.com/collectiveidea/delayed_job/blob/2014009496dd0b2af217ab322f74f91fe4e26097/lib/delayed/psych_ext.rb#L30-L65&quot;&gt;psych_ext.rb#L30-L65&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;В большинстве случаев это просто работает, но могут быть необычные сайд эффекты. 
Если метод применяется к объекту, который
успели уже удалить, то будет ошибка 500. Или предположим, что пользователь два раза быстро нажал на восстановление пароля, вы
сохранили токен восстановления, письмо в очередь, потом токен перетерся новым, еще одно письмо в очередь. Если очередь затупила,
то в зависимости от того как реализован метод отправки письма, пользователь может получить либо два письма с разным токеном (первый
из них уже не будет работать), либо с самым свежим.&lt;/p&gt;

&lt;p&gt;Вообще 99% необычного поведения DJ проявляется, если очередь не успевает обрабатываться, поэтому ее обязательно нужно мониторить. А так можно
пользоваться. Работает.&lt;/p&gt;

        </description>
        <pubDate>Mon, 17 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/17/dj/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/17/dj/index.html</guid>
      </item>
    
      <item>
        <title>Racket</title>
        <description>
          
          &lt;p&gt;Вот везде говорят, функциональное, функциональное, программирование. Я спросил в нашем чатике, а
что в тренде? На чем я должен программировать, если пришел на вечеринку с коктейлями?&lt;/p&gt;

&lt;p&gt;От Хаскеля отказался сразу, спасибо не надо. Я несколько раз пытался его понять, даже книжку
одну прочитал до половины, они там так и не написали не строчки кода,
 и я не написал ни строчки кода. Все что знаю -
есть монады, морфизмы и эндофункторы. Достаточно. Что тогда остается? Возможные
лисп-диалекты: скобочки и сложение в польской записи. Ок. Из ортодоксальных показалось, что
самый живой &lt;a href=&quot;https://clojure.org/&quot;&gt;Clojure&lt;/a&gt;,
но &lt;a href=&quot;https://github.com/ErrorSoul&quot;&gt;Муслим&lt;/a&gt; посоветовал сначала посмотреть
на &lt;a href=&quot;https://racket-lang.org/&quot;&gt;Racket&lt;/a&gt; - один из лиспов, который учат в школах, институтах и других
учебных заведениях.&lt;/p&gt;

&lt;p&gt;Что могу сказать - ну тоже язык. Скобочек много. Мозгу тяжело. Все как положено. Поставляется
с забавной визуальной средой DrRacket, вот я написал пример из тьюториала:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2/racket/1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;Попробовал я эту красоту и сразу представил, как подходит Заказчик и говорит: &amp;quot;кружочки - отличные,
а вот этот квадрат сделай плиз желтым&amp;quot;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2/racket/2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;В руби я бы вставил бы что-нибудь типа &lt;code&gt;x == 1 &amp;amp;&amp;amp; y == 0 &amp;amp;&amp;amp; kind == &amp;quot;square&amp;quot; ? &amp;quot;yellow&amp;quot; : &amp;quot;red&amp;quot;&lt;/code&gt; и пошел
бы дальше. Здесь же получилось захачить далеко не сразу. В итоге получилось примерно так:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-racket&quot; data-lang=&quot;racket&quot;&gt;&lt;span class=&quot;kn&quot;&gt;#lang &lt;/span&gt;&lt;span class=&quot;nn&quot;&gt;slideshow&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;square&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filled-rectangle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;series&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mk&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hc-append&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mk&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mk&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mk&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hacked_red&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eq?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;with_hacked_red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eq?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;yellow&amp;quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;red&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;cond&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eq?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hacked_red&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;eq?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;green&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;blue&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mk&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vc-append&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;series&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sz&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colorize&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mk&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;series&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sz&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colorize&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mk&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;series&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sz&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colorize&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mk&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))))&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;circle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;logo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;square&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;with_hacked_red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/2/racket/3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;Хм. Выглядит не очень. Кто знает как сделать более красиво и правильно?&lt;/p&gt;

        </description>
        <pubDate>Fri, 14 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/14/racket/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/14/racket/index.html</guid>
      </item>
    
      <item>
        <title>Терраформим Селектел</title>
        <description>
          
          &lt;p&gt;Научился терраформить Селетел я далеко не сразу, пришлось даже немного его подебажить и
openstack-утилиты. Кстати будете дебажить терраформ, сначала попробуйте запустить его с
&lt;code&gt;TF_LOG=1&lt;/code&gt;, может быть
поможет, так как компилируется он довольно долго, хоть и написан на Го.&lt;/p&gt;

&lt;p&gt;Вообще, &lt;a href=&quot;https://www.terraform.io/&quot;&gt;терраформ&lt;/a&gt; - это волшебная утилита для первичного
создания серверов, настройки DNS, всевозможных штук в Амазоне и прочих вещей. Это такой ансибл для
инфраструктуры, с отличной идеологией. Вы пишите в скрипте: &amp;quot;хочу: чтобы у меня были два таких бокса,
соответсвующие днс-записи и бакет на амозоне&amp;quot;, терраформ смотрит что у вас есть сейчас и добавляет
необходимо, либо удаляет избыточное. Там конечно немного нужно приноровится, но штука совершенно
космическая.&lt;/p&gt;

&lt;p&gt;Так вот заводите аккаунт в селектеле, добавляете туда проект и вперед:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;provider &amp;quot;dnsimple&amp;quot; {
    email = &amp;quot;${var.DNSIMPLE_EMAIL}&amp;quot;
    token = &amp;quot;${var.DNSIMPLE_TOKEN}&amp;quot;
}

provider &amp;quot;openstack&amp;quot; {         
  auth_url  = &amp;quot;https://api.selvpc.ru/identity/v3&amp;quot;
  domain_name = &amp;quot;${var.DOMAIN_NAME}&amp;quot;
  tenant_name = &amp;quot;${var.PROJECT_ID}&amp;quot;
  tenant_id = &amp;quot;${var.PROJECT_ID}&amp;quot;
  user_name  = &amp;quot;${var.USER}&amp;quot;
  password  = &amp;quot;${var.PASSWORD}&amp;quot;
}

variable &amp;quot;external_gateway&amp;quot; {
  default = &amp;quot;ab2264dd-bde8-4a97-b0da-5fea63191019&amp;quot; # hardcoded gw for selectel
}

resource &amp;quot;openstack_networking_network_v2&amp;quot; &amp;quot;network&amp;quot; {
  name = &amp;quot;network&amp;quot;           
  admin_state_up = &amp;quot;true&amp;quot;      
  region = &amp;quot;${var.REGION}&amp;quot;
}

resource &amp;quot;openstack_networking_subnet_v2&amp;quot; &amp;quot;subnet&amp;quot; {
  name = &amp;quot;subnet&amp;quot;            
  network_id = &amp;quot;${openstack_networking_network_v2.network.id}&amp;quot;
  cidr = &amp;quot;10.0.0.0/24&amp;quot;
  ip_version = 4               
  region = &amp;quot;${var.REGION}&amp;quot;              
}

resource &amp;quot;openstack_networking_router_v2&amp;quot; &amp;quot;router&amp;quot; {
  name = &amp;quot;router&amp;quot;
  admin_state_up = &amp;quot;true&amp;quot;
  region = &amp;quot;${var.REGION}&amp;quot;              
  external_gateway = &amp;quot;${var.external_gateway}&amp;quot;
}

resource &amp;quot;openstack_networking_router_interface_v2&amp;quot; &amp;quot;router&amp;quot; {
  router_id = &amp;quot;${openstack_networking_router_v2.router.id}&amp;quot;
  subnet_id = &amp;quot;${openstack_networking_subnet_v2.subnet.id}&amp;quot;
  region = &amp;quot;${var.REGION}&amp;quot;              
}

resource &amp;quot;openstack_compute_keypair_v2&amp;quot; &amp;quot;vakhov&amp;quot; {
  region = &amp;quot;${var.REGION}&amp;quot;              
  name = &amp;quot;vakhov&amp;quot;
  public_key = &amp;quot;...&amp;quot;
}

resource &amp;quot;openstack_blockstorage_volume_v1&amp;quot; &amp;quot;box01&amp;quot; {
  name = &amp;quot;disk-for-box01&amp;quot;
  region = &amp;quot;${var.REGION}&amp;quot;
  size = 150
  image_id = &amp;quot;${var.IMAGE_ID}&amp;quot;
  volume_type = &amp;quot;basic.${var.REGION}a&amp;quot;
}

resource &amp;quot;openstack_compute_instance_v2&amp;quot; &amp;quot;box01&amp;quot; {
  name = &amp;quot;box01&amp;quot;
  flavor_name = &amp;quot;${var.FLAVOR}&amp;quot;
  region = &amp;quot;${var.REGION}&amp;quot;
  key_pair = &amp;quot;vakhov&amp;quot;

  network {
    uuid = &amp;quot;${openstack_networking_network_v2.network.id}&amp;quot;
    floating_ip = &amp;quot;${var.BOX_01_FLOATING_IP}&amp;quot;
  }

  metadata = {
    &amp;quot;x_sel_server_default_addr&amp;quot;=&amp;quot;{\&amp;quot;ipv4\&amp;quot;:\&amp;quot;\&amp;quot;}&amp;quot;
  }

  block_device {
    boot_index = 0
    uuid = &amp;quot;${openstack_blockstorage_volume_v1.box01.id}&amp;quot;
    source_type = &amp;quot;volume&amp;quot;
    destination_type = &amp;quot;volume&amp;quot;
  }
}

resource &amp;quot;dnsimple_record&amp;quot; &amp;quot;box&amp;quot; {
  domain = &amp;quot;${var.DOMAIN}&amp;quot;
  name = &amp;quot;mega-box&amp;quot;
  value = &amp;quot;${openstack_compute_instance_v2.box01.network.0.floating_ip}&amp;quot;
  type = &amp;quot;A&amp;quot;
  ttl = 600
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Сорри, что без ката, но по-моему это божественно. Если вы натыкали хотя бы 10 проектов ручками, то
оцените &lt;img class=&#39;emoji&#39; title=&#39;:heart_eyes_cat:&#39; alt=&#39;:heart_eyes_cat:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f63b.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;. Конфигурировать таким образом инфраструктуру не только быстрее, но и гораздо
надежнее.&lt;/p&gt;

&lt;p&gt;В Селектеле есть несколько хитростей, которые его отличают от стандатного опенстека, описанного
в документации:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;авторизоваться нужно именно так, как в моем примере;&lt;/li&gt;
&lt;li&gt;флеворы в Селектеле создаются под каждый бокс отдельно (можно использовать один флевор для нескольких серверов) и они бездисковые, их можно создать заблаговременно с помощью &lt;code&gt;nova flavor-create&lt;/code&gt; как описано &lt;a href=&quot;https://habrahabr.ru/company/selectel/blog/242001/&quot;&gt;здесь&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;айдишники образов можно взять с помощью &lt;code&gt;glance image-list&lt;/code&gt; или из панели;&lt;/li&gt;
&lt;li&gt;и самое главное, добавьте в мета-информацию сервера поле &lt;code&gt;x_sel_server_default_addr = {&amp;quot;ipv4&amp;quot;:&amp;quot;&amp;quot;}&lt;/code&gt;, не спрашивайте зачем, так надо, иначе не будет работать сеть.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Вуаля. Теперь вы можете легко терраформить Селектел как вам нравится. А как вы создаете свою инфраструктуру?&lt;/p&gt;

        </description>
        <pubDate>Thu, 13 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/13/terraform-like-a-terraformer/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/13/terraform-like-a-terraformer/index.html</guid>
      </item>
    
      <item>
        <title>Автоматизация работы с проектами Селектела</title>
        <description>
          
          &lt;p&gt;Я хотел бы возможно написать пафосный туториал, как автоматизировать работу в облаке Селектела, но я не умею их писать. Поэтому скажу вот так -
в Селектеле кое-что легко автоматизировать, в некоторых местах есть хитрости, а кое-что сделать очень сложно или совсем нельзя.
Думаю, это очень точное описание.&lt;/p&gt;

&lt;p&gt;Итак, создать проект, поставить квоты, удалить проект (вот это мы не стали скриптовать, а удаляем через оболочку, где
есть дополнительное подтверждение, так как удаляется проект очень-очень быстро и может получиться очень-очень неловко),
добавить пользователей - все это прекрасно работает.
Список всех вызовов есть в разделе &lt;a href=&quot;https://support.selectel.ru/vpc/docs/&quot;&gt;документации&lt;/a&gt; (нужно залогинится).&lt;/p&gt;

&lt;p&gt;Далее великолепно работают все OpenStack-утилиты, как написано в &lt;a href=&quot;https://habrahabr.ru/company/selectel/blog/242001/&quot;&gt;блоге Селектела&lt;/a&gt;,
кроме &lt;code&gt;neutron&lt;/code&gt;, он почему-то не работает &lt;img class=&#39;emoji&#39; title=&#39;:smile:&#39; alt=&#39;:smile:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f604.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;. Возможно потому-что в 2015 году у них был один регион, а сейчас два. Но нейтрон нам и не понадобится.&lt;/p&gt;

&lt;p&gt;Чтобы легче работалось, 
я завернул утилиты в &lt;a href=&quot;https://github.com/uchiru/ostack/blob/master/Dockerfile&quot;&gt;докер образ&lt;/a&gt; и теперь вызываю вот так:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;docker run --rm -it &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  -e &lt;span class=&quot;nv&quot;&gt;OS_AUTH_URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://api.selvpc.ru/identity/v3 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  -e &lt;span class=&quot;nv&quot;&gt;OS_PROJECT_ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;... &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  -e &lt;span class=&quot;nv&quot;&gt;OS_USER_DOMAIN_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;... &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  -e &lt;span class=&quot;nv&quot;&gt;OS_USERNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;... &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  -e &lt;span class=&quot;nv&quot;&gt;OS_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;... &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  -e &lt;span class=&quot;nv&quot;&gt;OS_REGION_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;... &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  uchiru/ostack:v2 glance image-list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;USER_DOMAIN_NAME&lt;/code&gt; - это аккаунт (номер договора), &lt;code&gt;PROJECT_ID&lt;/code&gt; - айди проекта, можно взять в панели (hex на 32 символа), &lt;code&gt;REGION_NAME&lt;/code&gt; -
&amp;#39;ru-1&amp;#39; - Санкт-Петербург (в Питере, тире, пить), &amp;#39;ru-2&amp;#39; - Москва, &lt;code&gt;LOGIN/PASSWORD&lt;/code&gt; - 
логин и пароль вашего пользователя в селектеле, которого нужно добавить в проект.&lt;/p&gt;

&lt;p&gt;Вот. Проект вы легко создадите скриптами или через панель, а завтра расскажу,
что с ним можно сделать дальше.&lt;/p&gt;

        </description>
        <pubDate>Wed, 12 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/12/selectel-new-project/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/12/selectel-new-project/index.html</guid>
      </item>
    
      <item>
        <title>Пройти не оставляя следа</title>
        <description>
          
          &lt;p&gt;В современном вебе дорого владеть чем-либо.
Представьте у вас есть сервер, клевый, гудит, мигает лампочками. Но это же очень дорого! Теперь вы полностью за него
отвечаете, за счета за электричества, за все его поломки, простои и так далее. Арендовать куда-как дешевле с точки зрения
поддержки.&lt;/p&gt;

&lt;p&gt;Вот сервер гудит в датацентре, за ним смотрят, меняют что-то там, заботяться. Но это все равно все очень дорого:
KVM, разметка томов,
сгорел блог питания, посыпались диски и прочее.&lt;/p&gt;

&lt;p&gt;В облаке гораздо лучшее, пару кликов - и через пару минут ssh-доступ, дистрибутив какой хотите, мощность по заказу. Заходите,
ставите пару пакетов... &lt;/p&gt;

&lt;p&gt;Стоп, все равно дорого! Лучше ставить пакеты ансиблом, готовить образы пакером, разворачивать контейнеры в ECS, делать все, чтобы
владеть как можно меньшим. В современном мире исходники на гитхабе и кредитка в кармане самый выгодный способ
поддерживать типовые проекты. Heroku, Amazon, Github, Firebase, PaaS, IaaS, сотни других букв - сейчас есть много способов делать
дела, не владея фактически ничем осязаемым, кроме кредитной карты.&lt;/p&gt;

&lt;p&gt;И я скажу, что мне это очень нравится. Современные IT-проекты - очень сложная штука и здорово, что вокруг создается полный
набор самостоятельных, зрелых технологий, благодаря которым можно развивать ключевую фишку продукта, а за остальное платить.
Например мой блог - исходники на гитхабе,
комментарии - дискус, хостинг - гитхаб пейджес, и только домен мой. И то я себя ругаю за малодушие, что испугался
вести блог на &lt;a href=http://avakhov.github.io&gt;avakhov.github.io&lt;/a&gt;. Чтобы хоть как-то скомпенсировать этот факт - перенес
домен с GoDaddy на Dnsimple. Владеть доменом в простом интерфейсе днсимпла психологически дешевле.&lt;/p&gt;

&lt;p&gt;PS. еще для ежедневной публикации постов приходится держать целый DigitalOcean дроплет за 5$ в месяц, единственная задача которого выполнить
крон-задачу в 7:23 каждый день. Не знаю как это сделать проще :(&lt;/p&gt;

        </description>
        <pubDate>Tue, 11 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/11/owner/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/11/owner/index.html</guid>
      </item>
    
      <item>
        <title>Еще одна неделя без картинок</title>
        <description>
          
          &lt;p&gt;Заболел &lt;img class=&#39;emoji&#39; title=&#39;:crying_cat_face:&#39; alt=&#39;:crying_cat_face:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f63f.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;. Поэтому на этой неделе блог будет без картинок, так как сканирую я их
(о ужас) на офисном принтере.&lt;/p&gt;

        </description>
        <pubDate>Mon, 10 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/10/zabolel/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/10/zabolel/index.html</guid>
      </item>
    
  </channel>
</rss>
