<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Alexey Vakhov</title>
    <description>Tech addicted</description>
    <link>http://vakhov.me</link>
    <atom:link href="http://vakhov.me/atom.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>Р - Регулярность</title>
        <description>
          
          &lt;p&gt;Этим летом как-то я приуныл, работа-дом-работа-дом и решил заняться личностным ростом, вот прямо так. Окинув жизненный опыт,
а в 32 года уже обычно есть что окидывать, нашел одну закономерность. В тех делах был приятный результат,
где я занимался чем-то регулярно.
Из публичный вещей, это пожалуй комиты в рейлс. Я три месяца тратил на рейлс каждый день по 2-3 часа, включая выходные. В итоге
попал в топ-50 контрибьютеров (за три года правда скатился в топ-100).
В принципе с тех пор рейлс больше не учил, но тогда хорошо постарался, до сих
пор помогает.&lt;/p&gt;

&lt;p&gt;Поэтому я решил попробовать заменить спонтанную регулярность, на сознательную регулярность. Ну уже кстати есть первые результаты,
не скажу, что жизнь стала как бутон розы, но точно приятней. За два месяца я сделал две вещи: пробежал программу 5K Runner от
&lt;a href=http://www.fitness22.com&gt;fitness22&lt;/a&gt; и решил вести технический блог не меньше года, по истории каждый рабочий день.&lt;/p&gt;

&lt;p&gt;По раннеру получился пробег 114 км, прямо как спорткар с нуля до сотни за два месяца &lt;img class=&#39;emoji&#39; title=&#39;:smile:&#39; alt=&#39;:smile:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f604.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;. Просто оставлю здесь скриншоты первого
и последнего занятий:&lt;/p&gt;

&lt;p&gt;&lt;img src=/assets/2/regular/b.png width=300px&gt;
&lt;img src=/assets/2/regular/a.png width=300px&gt;&lt;/p&gt;

&lt;p&gt;Также опубликовал 42 поста с момента возрождения блога, то есть почти столько же, сколько за 3 года
до этого в сумме. Кстати очень помогает публичный контракт с вами, я заявил сроки, регулярность, теперь не отвертеться.
На самом деле зная себя, отвертеться можно и очень просто, но у меня еще есть серия трюков, которая, надеюсь поможет
не сойти с трассы. При случае расскажу. До встречи &lt;img class=&#39;emoji&#39; title=&#39;:smiley_cat:&#39; alt=&#39;:smiley_cat:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f63a.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;&lt;/p&gt;

        </description>
        <pubDate>Fri, 07 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/07/regular/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/07/regular/index.html</guid>
      </item>
    
      <item>
        <title>Кто пишет в базу?</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/db-optim/main.jpg&quot; /&gt;
          &lt;p&gt;Если база уперлась в диск по записи, то наверняка сайт ляжет. И помимо подкрутки собственно конфигурации
важно
узнать куда идет запись - уменьшить ее или вынести в другую базу.
На постгресе есть простой способ выяснить какие таблицы дают наибольшую
нагрузку.&lt;/p&gt;

&lt;p&gt;Под вашим привычным трафиком сбрасываете счетчики статистики с помощью команды
&lt;code&gt;select pg_stat_reset()&lt;/code&gt;.
Потом смотрите какие таблицы лидеры по записи:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n_tup_ins&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n_tup_upd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n_tup_del&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n_tup_ins&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n_tup_upd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n_tup_del&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;score&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pg_stat_user_tables&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;score&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Скорее всего этой информации вам хватит для первой оптимизации.&lt;/p&gt;

        </description>
        <pubDate>Thu, 06 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/06/db-optim/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/06/db-optim/index.html</guid>
      </item>
    
      <item>
        <title>Мне нужен recent</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/recent/main.jpg&quot; /&gt;
          &lt;p&gt;Совсем не про программирование, а про инвентаризацию привычек. Как и любой человек старой школы я
люблю раскладывать файлы по папкам. Я правда не очень организованный и в дропбоксе есть директории &lt;code&gt;acrhive01&lt;/code&gt;,
&lt;code&gt;_old&lt;/code&gt;, &lt;code&gt;папка2&lt;/code&gt; и подобные, но тем не менее с какой-то периодичностью садился и пытался навести
в файлах порядок.&lt;/p&gt;

&lt;p&gt;Однако относительно недавно нашел очарование вкладки &lt;code&gt;Recent&lt;/code&gt; в гугл драйве и сортировки по дате
создания на диске. Оказывается в подавляющем большинстве случаев мне нужен документ или файл из первой
десятки просмотренных недавно! Теперь я просто швыряю новую папку или документ прямо в корень
(облако, оно же резиновое)
и не трачу силы на поиск правильного места и правильного названия. Только чуть-чуть мучает совесть, но
жить можно.&lt;/p&gt;

&lt;p&gt;Так и в профессии, стараюсь время от времени пересматривать свои взгляды и привычки, вдруг они уже устарели.&lt;/p&gt;

        </description>
        <pubDate>Wed, 05 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/05/recent/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/05/recent/index.html</guid>
      </item>
    
      <item>
        <title>Безумие баш скриптов</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/crazy-bash/main.jpg&quot; /&gt;
          &lt;p&gt;Я люблю маленькие баш-скрипты. Это нативный, быстрой способ что-то автоматизировать, посчитать
или сделать. Баш - полноценный язык программирования, хотя и с специфическим синтаксисом. Однако
есть одна вещь, которая меня полностью убивает, не знаю зачем так сделано, даже гуглить не буду,
может быть кто-нибудь в комментариях ответит.&lt;/p&gt;

&lt;p&gt;Итак, интерпретатор баша исполняет скрипт строчка за строчкой и если поменять файл во время исполнения
долгого скрипта, то эффект будет не предсказуемым. Это полностью ломает привычный шаблон разработчика,
когда запустил программу и в этот момент меняешь код для следующего запуска. Я на этом попадался
несколько раз и каждый раз был в шоке.&lt;/p&gt;

&lt;p&gt;Самый простой пример, который смог сходу придумать:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;# x.sh&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;sleep &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; &amp;gt;&amp;gt; x.sh
&lt;span class=&quot;nb&quot;&gt;echo echo &lt;/span&gt;hello &amp;gt;&amp;gt; x.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Так вот, если запустить &lt;code&gt;bash x.sh&lt;/code&gt;, то он выведет &lt;code&gt;hello&lt;/code&gt;! WTF? Не знаю.&lt;/p&gt;

        </description>
        <pubDate>Tue, 04 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/04/crazy-bash/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/04/crazy-bash/index.html</guid>
      </item>
    
      <item>
        <title>Хороший пул реквест</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/github/main.jpg&quot; /&gt;
          &lt;p&gt;У нас есть негласное правило, что пул реквест должен хорошо выглядит
в веб-интерфейсе гитхаба. Мне кажется это отличное соглашение, благодаря которому
вводится несколько компромиссов,
из-за которых иначе могут возникать споры.&lt;/p&gt;

&lt;p&gt;Для начала ширина кода фиксируется на 140 символов, чтобы не было горизонтального скролла. Далее устанавливается
очень разумное ограничение на количество одновременных изменений. Я не изучал точно как работает алгоритм гитхаба, но
при попытке изменить слишком много файлов одновременно, он покажет только часть. Также не смотрим пул реквесты,
которые не мержатся автоматически в мастер или у которых тесты красные (мы работаем по гитхаб-флоу
и положительное ревью означает, что код может оказаться на продакшене через несколько минут, поэтому важно чтобы он был готов).&lt;/p&gt;

&lt;p&gt;Более глубоким эффектом оказывается разделение рефакторинга и нового функционала. Если например меняется отступ в больших
массивах кода, а это часто бывает при рефакторинге, то будет много красного и много зеленого. И уже не хочется в эти
изменения что-то добавлять еще, так как пул реквест станет не читаемым. Поэтому все массивные изменения всегда идут отдельными
пул реквестами, что сильно уменьшает влияние человеческого фактора.&lt;/p&gt;

&lt;p&gt;Пожалуй самое забавное, что через некоторое время
формируется ощущение, что полностью зеленые или полностью красные пул реквесты, более безопасные, чем полосатые. К полосатым -
всегда повышенное внимание.&lt;/p&gt;

        </description>
        <pubDate>Mon, 03 Oct 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/10/03/github/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/10/03/github/index.html</guid>
      </item>
    
      <item>
        <title>Cherry Pick для постгресса</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/pg_pick/main.jpg&quot; /&gt;
          &lt;p&gt;В гите есть забавная команда &lt;code&gt;cherry-pick&lt;/code&gt;, с помощью которой можно один или несколько комитов перенести из одной
ветки в другую. Вообще в гите много забавных команд, кто например знает про &lt;code&gt;git rerere&lt;/code&gt;? И сколько раз вы ее использовали
в повседневной практике? Я такую команду не знаю, ни разу не использовал, и даже желания нет. И вообще мне про 
нее рассказал &lt;a href=https://twitter.com/timurminulin&gt;Тимур Минулин&lt;/a&gt;, думаю он ее тоже не использует, уж больно она экзотичная.&lt;/p&gt;

&lt;p&gt;Так вот черри пик. А иногда возникает потребность перенести несколько записей из одной базы данных в другую, например для тестирования
нужна маленькая часть большой таблицы. Это сделать очень просто с помощью одной шел команды:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;psql db1 -c&lt;span class=&quot;s2&quot;&gt;&amp;quot;COPY (SELECT * from table where id in (1,2)) TO STDOUT&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  psql db2 -c&lt;span class=&quot;s2&quot;&gt;&amp;quot;COPY table FROM stdin&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Таким образом можно переносить записи по произвольному запросу (конечно схемы таблиц должны совпадать),
что в некоторых ситуациям помогает сэкономить много времени.&lt;/p&gt;

        </description>
        <pubDate>Fri, 30 Sep 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/09/30/pg_pick/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/09/30/pg_pick/index.html</guid>
      </item>
    
      <item>
        <title>Самая лучшая реалтайм аналитика</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/ga/main.jpg&quot; /&gt;
          &lt;p&gt;Никогда бы не поверил, что самым лучшим инструментом проверки работоспособности сайта прямо сейчас является гугл аналитика,
а именно вкладка &lt;code&gt;Real-Time&lt;/code&gt;.
Более отзывчивого инструмента я не знаю, при любом подозрении в первую очередь смотрим именно туда. Начиная с некоторого
трафика любая значительная неровность на графике на 100% означает, что с сайтом проблемы.&lt;/p&gt;

&lt;p&gt;Например так выглядит добавление колонки с дефалтовым значением в достаточно большую таблицу (мониторинг завопил, команда &amp;quot;под ружье&amp;quot;,
пока разобрались в чем проблема, начали чинить, колонка уже добавилась, но шрам остался).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2/ga/2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;В архивах также нашел такой график, не помню в чем была проблема, но чуть-чуть пользователей зацепило, помню что вовремя успели
остановить деструктивное действие.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2/ga/3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;И вообще гугл аналитика шикарный инструмент. Там конечно много кнопочек и вкладочек, но умелые люди творят с ними просто чудеса.&lt;/p&gt;

        </description>
        <pubDate>Thu, 29 Sep 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/09/29/ga/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/09/29/ga/index.html</guid>
      </item>
    
      <item>
        <title>Стресс выбора из хороших решений</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/stress/main.jpg&quot; /&gt;
          &lt;p&gt;В &lt;a href=http://www.mann-ivanov-ferber.ru/books/sse/funky-business/&gt;бизнесе в стиле фанк&lt;/a&gt; есть пример, когда ведущий журнал
по потребительству заявил, что все марки машин технически хороши, выбирайте себе по цвету, сервису, красоте и финансовым возможностям.
Мне кажется в веб-разработке тоже давно пора заявить, что все технологие хорошие, выбирайте те, у которых звездочек на гитхабе
больше &lt;img class=&#39;emoji&#39; title=&#39;:smile:&#39; alt=&#39;:smile:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f604.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;. Это так и есть, современный веб можно написать в конечные сроки на любом популярном языке и фреймворке, конечно
с разной степенью комфорта.&lt;/p&gt;

&lt;p&gt;Обратной стороной этого изобилия является невротизм выбора. Читал у одного психолога, что выбор из нескольких хороших вариантов -
это большой стресс для человека. Именно поэтому всевозможным депрессиям и расстройствам подвержены больше жители развитых обществ.
Удивительно, что выбор есть или не есть, менее травмирующий для психики, чем выбор чего бы такого поесть и чего бы этакого купить.&lt;/p&gt;

&lt;p&gt;Вопрос моды в разработке сейчас играет большую роль и порождает много споров и стресса. У нас есть даже внутренняя шутка, что поздно учить
&amp;lt;имя технологии&amp;gt;, так как она уже у всех неделю в продакшене. Мне кажется, что выход тут такой же
как и в потребительском стрессе, признать,
что самые лучшие и модные ботинки, те, которые согревают ноги прямо сейчас, а самая правильная и прогрессивная технология - та, которая
решает ваши сегодняшние задачи (но по сторонам поглядывать &lt;img class=&#39;emoji&#39; title=&#39;:smile:&#39; alt=&#39;:smile:&#39; src=&#39;https://assets.github.com/images/icons/emoji/unicode/1f604.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; /&gt;).&lt;/p&gt;

        </description>
        <pubDate>Wed, 28 Sep 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/09/28/stress/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/09/28/stress/index.html</guid>
      </item>
    
      <item>
        <title>Когда пора комментировать</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/comments/main.jpg&quot; /&gt;
          &lt;p&gt;Когда я работал C++-разработчиком в &lt;a href=http://www.cqg.com&gt;CQG&lt;/a&gt; у нас было забавное правило, которым пользуюсь до сих пор.
В новом коде было необходимо документировать только классы и функции (а их нужно было документировать всегда, для большой кодовой
базы это необходимо), но сам код практически не документировался. Потому-что новый код всегда чистенький, гладенький и в целом
понятный. Но когда идет вставка кода в уже существующий метод, хорошим тоном было описать кто и зачем этот фрагмент
вставил.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;some&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ... много кода &lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// av: fix of #342987. Иногда внешний сервис возвращает 1, но при этом ...&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// ... еще много кода&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Формально эту информацию можно достать с помощью &lt;code&gt;git blame&lt;/code&gt; (ну не &lt;code&gt;git&lt;/code&gt; на самом деле, гита тогда еще не было),
однако тогда приходится делать много лишних кликов, прыгать по истории и вникать во все комиты, в которых менялся данный файл.
Фактически же такие комменарии очень
сильно помогают разобраться в конкретном файле. И чем больше рубцов, тем более легаси код.&lt;/p&gt;

        </description>
        <pubDate>Tue, 27 Sep 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/09/27/comments/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/09/27/comments/index.html</guid>
      </item>
    
      <item>
        <title>С Синатрой мне не по пути</title>
        <description>
          &lt;img src=&quot;http://vakhov.me/assets/2/sinatra/main.jpg&quot; /&gt;
          &lt;p&gt;Так получилось, что с Синатрой у меня так и не сложилось. Я раз пять пробовал запускать на нем различные легкие приложения, а
потом понимал, что что-то как-то неютно (привет, &lt;code&gt;ActiveSupport&lt;/code&gt;). Ой, и в базу нужно сходить (добавим &lt;code&gt;ActiveRecord&lt;/code&gt;). Еще недурно было бы
пару писем отправить (ура, есть же &lt;code&gt;ActionMailer&lt;/code&gt;). В этот момент появляется первое подозрение, что что-то здесь не так.
И потом нужно добавить пару форм, авторизацию, а сессии из коробки не работают, и csrf нет
и вообще пора приложение переводить на рейлс и ловить кайф. Возвращаться в рейлс с других технологий - всегда в
кайф, там все как-то просто берет и работает.&lt;/p&gt;

&lt;p&gt;У нас сейчас минимум два таких приложения крутится, которые побывали синатрой и превратились в рейлс. Я общался - 
у многих так. Говорят, что где-то там, у кого-то синатра приложения работают и все довольны, но в живой природе пока не встречал.&lt;/p&gt;

        </description>
        <pubDate>Mon, 26 Sep 2016 00:00:00 +0300</pubDate>
        <link>http://vakhov.me/blog/2016/09/26/sinatra/index.html</link>
        <guid isPermaLink="true">http://vakhov.me/blog/2016/09/26/sinatra/index.html</guid>
      </item>
    
  </channel>
</rss>
