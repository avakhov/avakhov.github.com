---
layout: post
title: "Booter 1.0.0.rc1"
date: 2012-04-17 18:23
comments: true
categories: 
---

![](/assets/5-booter/burger.jpg)

С радостью сообщаю, что на прошлой неделе зарелизился бутер 1.0.0.rc1, первый релиз-кандидат [https://github.com/boshie/booter](https://github.com/boshie/booter). Он пока еще без кунжута, но уже довольно питательный :-)

Для меня эта библиотека очень важна, так как это мой первый настоящий опер-сорс.

История появления гема очень простая. Я люблю использовать твиттеровский бутстрап для прототипов и
бэкендов. Сначала использовал его напрямую, потом написал простой форм-билдер. Затем
вынес стили и билдер в отдельный гем, чтобы шарить между проектами. Я не стал использовать simple_form или
любую другую обертку, так как мне были нужны пару простых фич и я не хотел тянуть в проекты
большие многофункциональные библиотеки.

Долгое время гем состоял из 3-х файлов и находился в версии
0.2, но пару недель назад [Алексей Юрченко](https://github.com/alexesDev) прислал мне пулриквест под
номером 1. Первый для меня, как мейнтейнера гема, и первый для него, как для контрибьютера опен сорс.
Я принял изменения, которые он предложил, чтобы использовать библиотеку в своем проекте,
и решил сделать из бутера
полноценный гем. Я понимаю, что бутер не завоюет мир, но зато мы 
прошли практически все фазы, принятые у современного программного обеспечения, своего
рода боевое крещение.

Бутер покрыт спеками, которые запускаются на трависе. Он представляет из себя полноценный енджин:

``` ruby
module Booter
  class Engine < ::Rails::Engine
  end
end
```

Поддерживается [семантическая версионность](http://semver.org/). Оказывается когда я первый
раз  читал этот
документ, то не заметил важныe пункты про версию 1.0.0, после которой API становится публичным:

<blockquote>
Major version zero (0.y.z) is for initial development. Anything may change at any time. The public API should not be considered stable.
</blockquote>

<blockquote>
Version 1.0.0 defines the public API. The way in which the version number is incremented after this release is dependent on this public API and how it changes.
</blockquote>

Таким образом, если гем стал 1.0 и автор придерживается семантических версий, то API этого гема
можно считать стабильным.

Для бутера создано на Хероку [демонстрационное приложение](http://growing-cloud-6915.heroku.com)
(работает оно еще не совсем хорошо).
В [ридми](https://github.com/boshie/booter#readme) описаны примеры
использования библиотеки. Другими словами, полный джентельменский набор.
Сейчас мы доделываем фичи, которые хотим включить в 1.0, но релиз-кандидат тоже рабочий,
он работает в нескольких проектах.

Разрабатывать гем довольно интересно. Если в проект нужно добавлять изменения как можно быстрее и
сразу же выкатывать на продакшн, то гем разрабатывается в более спокойном режиме, так как
всегда нужно думать об уже существующих проектах, чтобы не потерять совместимость, не 
сделать слишком общее решение или наоборот слишком частное. Более того внести
маленькое, сиюминутное изменение в гем сильно дороже, чем в обычный проект, так как нужно
потестировать, присвоить новую версию, 
выложить на rubygems.

Поэтому сам процесс разработки гема настраивает на накопление изменений и временные
хаки до релиза следующих стабильных версий. Хаки делать очень просто, обычно у всех
гемов есть константа `VERSION`, которую можно проверить и бросить эксепшн если появилась
новая версия и вы обновили свой гем-файл.

``` ruby
raise "Remove code below" if Booter::VERSION != '1.0.0.rc1'
# ...
```

Думаю вы помните, что рейлс, по-моему 2.3.13, не получились,
так как что-то отвалилось в процессе релиза и после этого сразу же вышли 2.3.14. Мне кажется, что
коре тим постарается больше так не делать, потому-что это слишком большой стресс.
Cейчас даже есть документ, в котором описано как релизить рельсы правильно: [https://github.com/rails/rails/blob/master/RELEASING_RAILS.rdoc](https://github.com/rails/rails/blob/master/RELEASING_RAILS.rdoc).


Кстати создать скелет нового гема можно двумя способами `bundle gem <имя-гема>` или
`rails plugin new <имя-гема>`.
Первый вариант годится для низкоуровневых библиотек. `rails plugin new` же создает помимо прочего dummy-приложение для тестирования
енджинов, и является современной заменой гема enginex, который создал Жозе Валим для своей
книги "Crafting Rails Applications".
